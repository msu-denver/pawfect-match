@startuml sequence_add_pet
title US#4 - Add New Pet Sequence Diagram

actor "Shelter Admin" as admin
participant "Browser" as browser
participant "Routes" as routes
participant "Database" as db

admin -> browser: Click "Add New Pet"
browser -> routes: GET /pet/add

alt User is Admin
    routes --> browser: render_template('add_pet.html')
    
    admin -> browser: Fill and submit form
    browser -> routes: POST /pet/add (form data)
    
    routes -> routes: Format age from age_value + age_unit
    routes -> routes: Create Pet object
    routes -> db: db.session.add(pet)
    routes -> db: db.session.commit()
    routes -> routes: flash('Pet {name} added successfully!')
    routes --> browser: redirect(url_for('main.dashboard'))
    browser --> admin: Show dashboard with success message
    
else User is Not Admin
    routes -> routes: flash('Only admins can add pets.')
    routes --> browser: redirect(url_for('main.dashboard'))
    browser --> admin: Show dashboard with error
end

@enduml
